<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼“é“éƒ¨ æŒ‡å°äºˆç´„ã‚·ã‚¹ãƒ†ãƒ </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        .slot-free { @apply bg-white text-emerald-600 border-emerald-100; }
        .slot-selected { @apply bg-emerald-500 text-white border-emerald-600 shadow-inner; }
        .slot-busy { @apply bg-gray-100 text-gray-400 border-gray-100 cursor-not-allowed; }
        .slot-mine { @apply bg-blue-100 text-blue-600 border-blue-200 font-bold; }
        ::-webkit-scrollbar { height: 4px; }
        ::-webkit-scrollbar-thumb { background: #10b981; borderRadius: 10px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans select-none">
    <div id="app" class="max-w-4xl mx-auto min-h-screen pb-32">
        <header class="bg-emerald-800 text-white p-4 sticky top-0 z-30 shadow-md">
            <div class="flex justify-between items-center">
                <h1 class="text-lg font-bold">ğŸ¯ å¼“é“éƒ¨ æŒ‡å°äºˆç´„</h1>
                <span class="text-xs bg-emerald-700 px-2 py-1 rounded">{{ userName }} ã•ã‚“</span>
            </div>
            <div class="mt-3 flex gap-2">
                <input type="date" v-model="selectedDate" @change="loadData" class="flex-1 p-2 rounded text-black text-sm outline-none">
                <button @click="sortByName = !sortByName" class="bg-emerald-600 px-3 py-1 rounded text-xs">
                    {{ sortByName ? 'åå‰é †æ¸ˆ' : 'åå‰ã§ã‚½ãƒ¼ãƒˆ' }}
                </button>
            </div>
        </header>

        <main class="p-2">
            <div v-if="loading" class="text-center py-20 text-emerald-600 animate-pulse font-bold">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
            
            <div v-else class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="overflow-x-auto" id="timeline-container">
                    <div class="flex bg-slate-50 border-b border-slate-200">
                        <div class="w-20 flex-shrink-0 p-3 border-r bg-slate-100 sticky left-0 z-20 font-bold text-xs text-slate-500">æŒ‡å°è€…</div>
                        <div v-for="t in timeSlots" :key="t" class="w-14 flex-shrink-0 py-2 text-[10px] text-center border-r border-slate-100 text-slate-400">
                            {{ t }}
                        </div>
                    </div>

                    <div v-for="teacher in sortedTeachers" :key="teacher.name" class="flex border-b border-slate-100 last:border-0 hover:bg-emerald-50/30 transition">
                        <div class="w-20 flex-shrink-0 p-3 border-r bg-white sticky left-0 z-10 font-bold text-sm shadow-[2px_0_5px_rgba(0,0,0,0.03)]">
                            {{ teacher.name }}
                        </div>
                        <div class="flex">
                            <div v-for="(status, index) in teacher.slots" 
                                 :key="index"
                                 @click="onSlotClick(teacher, index)"
                                 :class="getSlotClass(teacher.name, index, status)"
                                 class="w-14 h-14 flex-shrink-0 border-r border-slate-50 flex flex-col items-center justify-center text-[10px] cursor-pointer transition-all relative">
                                <span v-if="status === 'o'">ç©ºã</span>
